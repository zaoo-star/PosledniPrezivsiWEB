<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Posledn√≠ P≈ôe≈æiv≈°√≠ - P≈ôe≈æij. Bojuj. Vl√°dni.</title>
    <meta name="description" content="Post-apokalyptick√° survival hra. Prozkoumej zniƒçen√Ω svƒõt, bojuj s mutanty, buduj z√°kladnu a rozhodni o osudu lidstva.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&family=Share+Tech+Mono&family=Oxanium:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --rust: #d4722e; --rust-glow: rgba(212, 114, 46, 0.6); --blood: #8b0000;
            --toxic: #7cfc00; --toxic-dark: #3d5e00; --radiation: #ffff00;
            --dark: #0a0a0a; --darker: #050505; --metal: #2a2a2a;
            --text: #c4b998; --text-light: #e8dcc4;
        }
        html { scroll-behavior: smooth; }
        body { font-family: 'Oxanium', sans-serif; background: var(--darker); color: var(--text); line-height: 1.6; cursor: crosshair; }
        a, button { cursor: crosshair; }
        
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); filter: brightness(1.2); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        @keyframes flicker { 0%, 100% { opacity: 1; } 50% { opacity: 0.8; } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        body::before { content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E"); opacity: 0.03; pointer-events: none; z-index: 9999; }
        
        nav { position: fixed; top: 0; left: 0; right: 0; padding: 0.8rem 2rem; background: rgba(0,0,0,0.95); backdrop-filter: blur(10px); z-index: 1000; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(212, 114, 46, 0.3); }
        .nav-brand { display: flex; align-items: center; gap: 0.8rem; text-decoration: none; }
        .nav-logo { width: 45px; height: 45px; background: radial-gradient(circle, var(--radiation) 0%, var(--rust) 50%, transparent 70%); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; animation: pulse 2s infinite; box-shadow: 0 0 20px var(--rust-glow); }
        .nav-title { font-family: 'Russo One', sans-serif; font-size: 1.3rem; color: var(--rust); text-transform: uppercase; letter-spacing: 2px; }
        .nav-links { display: flex; gap: 0.5rem; }
        .nav-link { color: var(--text); text-decoration: none; padding: 0.6rem 1.2rem; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px; border: 1px solid transparent; transition: all 0.3s; background: rgba(255,255,255,0.02); clip-path: polygon(10px 0, 100% 0, calc(100% - 10px) 100%, 0 100%); }
        .nav-link:hover, .nav-link.active { color: var(--rust); background: rgba(212, 114, 46, 0.1); border-color: var(--rust); }
        .mobile-menu-btn { display: none; background: none; border: 2px solid var(--rust); color: var(--rust); padding: 0.5rem; font-size: 1.2rem; }
        
        .hero { min-height: 100vh; position: relative; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 2rem; }
        .hero-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(ellipse at 20% 80%, rgba(139, 0, 0, 0.3) 0%, transparent 50%), radial-gradient(ellipse at 80% 20%, rgba(212, 114, 46, 0.2) 0%, transparent 50%), linear-gradient(180deg, #0a0505 0%, #1a0f0a 50%, #0a0a05 100%); z-index: -2; }
        .hero-particles { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .particle { position: absolute; width: 4px; height: 4px; background: var(--rust); border-radius: 50%; opacity: 0.5; animation: float 6s infinite; box-shadow: 0 0 10px var(--rust); }
        .hero-content { max-width: 900px; z-index: 1; }
        .hero-warning { display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(255, 0, 0, 0.1); border: 1px solid rgba(255, 0, 0, 0.3); padding: 0.5rem 1.5rem; margin-bottom: 2rem; font-family: 'Share Tech Mono', monospace; font-size: 0.85rem; color: #ff4444; animation: flicker 3s infinite; }
        .hero-warning::before { content: '‚ö†'; font-size: 1.2rem; }
        .hero-title { font-family: 'Russo One', sans-serif; font-size: clamp(3rem, 10vw, 6rem); color: transparent; background: linear-gradient(180deg, #fff 0%, var(--rust) 50%, var(--blood) 100%); -webkit-background-clip: text; background-clip: text; text-transform: uppercase; letter-spacing: 5px; line-height: 1.1; margin-bottom: 1rem; }
        .hero-subtitle { font-family: 'Share Tech Mono', monospace; font-size: 1.5rem; color: var(--text); margin-bottom: 2rem; }
        .hero-tagline { font-size: 1.1rem; color: var(--text); max-width: 700px; margin: 0 auto 3rem; opacity: 0.8; line-height: 1.8; }
        .hero-cta { display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap; margin-bottom: 4rem; }
        
        .btn { position: relative; padding: 1rem 2.5rem; font-family: 'Oxanium', sans-serif; font-size: 1rem; font-weight: 600; text-transform: uppercase; letter-spacing: 2px; text-decoration: none; border: none; transition: all 0.3s; clip-path: polygon(15px 0, 100% 0, calc(100% - 15px) 100%, 0 100%); overflow: hidden; }
        .btn-primary { background: linear-gradient(135deg, var(--rust) 0%, #b85a1a 100%); color: #fff; box-shadow: 0 0 30px var(--rust-glow); }
        .btn-primary:hover { transform: translateY(-3px) scale(1.02); box-shadow: 0 10px 40px var(--rust-glow); }
        .btn-secondary { background: transparent; color: var(--rust); border: 2px solid var(--rust); }
        .btn-secondary:hover { background: rgba(212, 114, 46, 0.1); }
        
        .hero-stats { display: flex; justify-content: center; gap: 3rem; padding: 2rem; background: rgba(0,0,0,0.5); border: 1px solid rgba(212, 114, 46, 0.2); clip-path: polygon(20px 0, calc(100% - 20px) 0, 100% 20px, 100% calc(100% - 20px), calc(100% - 20px) 100%, 20px 100%, 0 calc(100% - 20px), 0 20px); flex-wrap: wrap; }
        .stat-item { text-align: center; }
        .stat-value { font-family: 'Russo One', sans-serif; font-size: 2.5rem; color: var(--rust); text-shadow: 0 0 20px var(--rust-glow); display: block; }
        .stat-label { font-size: 0.8rem; color: var(--text); text-transform: uppercase; letter-spacing: 2px; opacity: 0.7; }
        
        section { padding: 6rem 2rem; }
        .section-header { text-align: center; margin-bottom: 4rem; }
        .section-tag { display: inline-block; font-family: 'Share Tech Mono', monospace; font-size: 0.85rem; color: var(--toxic); text-transform: uppercase; letter-spacing: 3px; margin-bottom: 1rem; padding: 0.3rem 1rem; border: 1px solid var(--toxic-dark); background: rgba(124, 252, 0, 0.05); }
        .section-title { font-family: 'Russo One', sans-serif; font-size: clamp(2rem, 5vw, 3rem); color: var(--text-light); text-transform: uppercase; letter-spacing: 3px; margin-bottom: 1rem; }
        .section-subtitle { color: var(--text); opacity: 0.7; max-width: 600px; margin: 0 auto; }
        
        .guide-section { background: linear-gradient(180deg, var(--darker) 0%, #0f0805 50%, var(--darker) 100%); }
        .guide-intro { max-width: 900px; margin: 0 auto 4rem; text-align: center; }
        .guide-intro-text { font-size: 1.1rem; line-height: 2; color: var(--text); background: rgba(0,0,0,0.4); padding: 2rem; border-left: 4px solid var(--rust); text-align: left; font-style: italic; }
        .guide-intro-text .signature { display: block; margin-top: 1rem; text-align: right; color: var(--rust); font-style: normal; font-family: 'Share Tech Mono', monospace; }
        
        .guide-categories { display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem; margin-bottom: 3rem; max-width: 1200px; margin-left: auto; margin-right: auto; }
        .guide-cat-btn { background: rgba(20, 15, 10, 0.9); border: 2px solid rgba(212, 114, 46, 0.3); color: var(--text); padding: 1rem 1.5rem; font-family: 'Oxanium', sans-serif; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; cursor: crosshair; transition: all 0.3s; display: flex; align-items: center; gap: 0.5rem; }
        .guide-cat-btn:hover, .guide-cat-btn.active { border-color: var(--rust); background: rgba(212, 114, 46, 0.1); color: var(--rust); box-shadow: 0 0 20px rgba(212, 114, 46, 0.3); }
        .guide-cat-btn .icon { font-size: 1.3rem; }
        
        .guide-content { max-width: 1000px; margin: 0 auto; }
        .guide-panel { display: none; }
        .guide-panel.active { display: block; animation: fadeIn 0.5s ease; }
        
        .guide-card { background: linear-gradient(135deg, rgba(25, 18, 12, 0.95) 0%, rgba(12, 8, 5, 0.98) 100%); border: 1px solid rgba(212, 114, 46, 0.2); margin-bottom: 1.5rem; overflow: hidden; }
        .guide-card-header { background: linear-gradient(90deg, rgba(212, 114, 46, 0.2) 0%, transparent 100%); padding: 1.2rem 1.5rem; display: flex; align-items: center; gap: 1rem; cursor: crosshair; transition: all 0.3s; border-left: 4px solid var(--rust); }
        .guide-card-header:hover { background: linear-gradient(90deg, rgba(212, 114, 46, 0.3) 0%, transparent 100%); }
        .guide-card-icon { font-size: 2rem; width: 50px; text-align: center; }
        .guide-card-title { font-family: 'Russo One', sans-serif; font-size: 1.2rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 1px; flex: 1; }
        .guide-card-toggle { color: var(--rust); font-size: 1.5rem; transition: transform 0.3s; }
        .guide-card.open .guide-card-toggle { transform: rotate(45deg); }
        .guide-card-body { max-height: 0; overflow: hidden; transition: max-height 0.5s ease; }
        .guide-card.open .guide-card-body { max-height: 2000px; }
        .guide-card-content { padding: 1.5rem; border-top: 1px solid rgba(212, 114, 46, 0.1); }
        .guide-card-content p { margin-bottom: 1rem; line-height: 1.8; }
        .guide-card-content .highlight { color: var(--rust); font-weight: 600; }
        .guide-card-content .toxic { color: var(--toxic); }
        .guide-card-content .warning { color: #ff6b6b; }
        .guide-card-content .gold { color: #ffd700; }
        .guide-card-content ul { list-style: none; margin: 1rem 0; }
        .guide-card-content ul li { padding: 0.5rem 0 0.5rem 2rem; position: relative; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .guide-card-content ul li::before { content: '‚ñ∏'; position: absolute; left: 0.5rem; color: var(--rust); }
        .guide-tip { background: rgba(124, 252, 0, 0.05); border: 1px solid rgba(124, 252, 0, 0.2); padding: 1rem; margin: 1rem 0; border-left: 4px solid var(--toxic); }
        .guide-tip::before { content: 'üí° TIP: '; color: var(--toxic); font-weight: 600; font-family: 'Share Tech Mono', monospace; }
        .guide-warning { background: rgba(255, 0, 0, 0.05); border: 1px solid rgba(255, 0, 0, 0.2); padding: 1rem; margin: 1rem 0; border-left: 4px solid #e74c3c; }
        .guide-warning::before { content: '‚ö†Ô∏è VAROV√ÅN√ç: '; color: #e74c3c; font-weight: 600; font-family: 'Share Tech Mono', monospace; }
        
        .features-quick { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; max-width: 1200px; margin: 0 auto; }
        .feature-quick-card { background: linear-gradient(135deg, rgba(30,20,15,0.9) 0%, rgba(15,10,8,0.95) 100%); border: 1px solid rgba(212, 114, 46, 0.2); padding: 2rem; transition: all 0.4s; position: relative; }
        .feature-quick-card::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--rust); transform: scaleY(0); transition: transform 0.3s; }
        .feature-quick-card:hover { transform: translateY(-5px); border-color: var(--rust); }
        .feature-quick-card:hover::before { transform: scaleY(1); }
        .feature-quick-icon { font-size: 2.5rem; margin-bottom: 1rem; }
        .feature-quick-title { font-family: 'Russo One', sans-serif; font-size: 1.1rem; color: var(--text-light); text-transform: uppercase; margin-bottom: 0.5rem; }
        .feature-quick-desc { color: var(--text); opacity: 0.7; font-size: 0.9rem; }
        
        .download-section { background: radial-gradient(ellipse at 30% 50%, rgba(212, 114, 46, 0.1) 0%, transparent 50%), linear-gradient(180deg, #0f0805 0%, var(--darker) 100%); padding: 8rem 2rem; }
        .download-box { max-width: 1000px; margin: 0 auto; background: linear-gradient(135deg, rgba(30,20,15,0.95) 0%, rgba(10,8,5,0.98) 100%); border: 2px solid var(--rust); padding: 4rem; clip-path: polygon(30px 0, calc(100% - 30px) 0, 100% 30px, 100% calc(100% - 30px), calc(100% - 30px) 100%, 30px 100%, 0 calc(100% - 30px), 0 30px); box-shadow: 0 0 60px rgba(212, 114, 46, 0.3); }
        .download-header { text-align: center; margin-bottom: 3rem; }
        .download-version { font-family: 'Share Tech Mono', monospace; color: var(--toxic); font-size: 0.9rem; margin-bottom: 0.5rem; }
        .download-title { font-family: 'Russo One', sans-serif; font-size: 2.5rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 3px; }
        .download-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 2rem; }
        .download-option { background: rgba(0,0,0,0.4); border: 1px solid rgba(212, 114, 46, 0.3); padding: 2rem; text-align: center; transition: all 0.3s; }
        .download-option:hover { border-color: var(--rust); }
        .download-option-icon { font-size: 3rem; margin-bottom: 1rem; }
        .download-option-title { font-family: 'Russo One', sans-serif; font-size: 1.2rem; color: var(--text-light); margin-bottom: 0.5rem; }
        .download-option-info { font-size: 0.85rem; color: var(--text); opacity: 0.6; margin-bottom: 1.5rem; }
        
        footer { background: linear-gradient(180deg, var(--darker) 0%, #030303 100%); padding: 4rem 2rem 2rem; border-top: 1px solid rgba(212, 114, 46, 0.2); text-align: center; }
        .footer-brand { display: flex; align-items: center; justify-content: center; gap: 1rem; margin-bottom: 2rem; }
        .footer-copyright { font-size: 0.85rem; color: var(--text); opacity: 0.4; }
        
        @media (max-width: 768px) {
            .nav-links { 
                display: none; 
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: rgba(0,0,0,0.98);
                flex-direction: column;
                padding: 1rem;
                border-bottom: 1px solid var(--rust);
            }
            .nav-links.active { display: flex; }
            .nav-links .nav-link { 
                padding: 1rem; 
                text-align: center; 
                border-bottom: 1px solid rgba(212, 114, 46, 0.2);
            }
            .mobile-menu-btn { display: block; }
            .hero-stats { gap: 1.5rem; }
            .stat-value { font-size: 2rem; }
            .download-box { padding: 2rem; }
        }
    </style>
</head>
<body>
    <nav>
        <a href="#" class="nav-brand">
            <div class="nav-logo">‚ò¢Ô∏è</div>
            <span class="nav-title">Posledn√≠ P≈ôe≈æiv≈°√≠</span>
        </a>
        <div class="nav-links" id="navLinks">
            <a href="#guide" class="nav-link">Pr≈Øvodce</a>
            <a href="#features" class="nav-link">Funkce</a>
            <a href="#" class="nav-link" id="forumNavBtn" onclick="handleForumClick(); return false;" style="display: none;">üí¨ F√≥rum</a>
            <a href="https://github.com/zaoo-star/PosledniPrezivsiWEB/releases/download/1.0/app-release.apk" class="nav-link active">St√°hnout</a>
            <a href="#" class="nav-link" id="authNavBtn" onclick="showAuthModal(); return false;">üë§ P≈ôihl√°sit</a>
        </div>
        <button class="mobile-menu-btn" id="mobileMenuBtn" onclick="toggleMobileMenu()">‚ò∞</button>
    </nav>
    
    <section class="hero">
        <div class="hero-bg"></div>
        <div class="hero-particles" id="particles"></div>
        <div class="hero-content">
            <div class="hero-warning">OBLAST KONTAMINOV√ÅNA ‚Ä¢ VSTUP NA VLASTN√ç NEBEZPEƒå√ç</div>
            <h1 class="hero-title">Posledn√≠<br>P≈ôe≈æiv≈°√≠</h1>
            <p class="hero-subtitle">// P≈òE≈ΩIJ. BOJUJ. VL√ÅDNI. //</p>
            <p class="hero-tagline">Rok 2087. Svƒõt je v trosk√°ch. Jadern√© bomby udƒõlaly sv√© a zanechaly po sobƒõ jen popel, mutanty a p√°r bl√°zn≈Ø, co si mysl√≠, ≈æe maj√≠ ≈°anci p≈ôe≈æ√≠t. Spoiler alert: <strong>M√°≈°.</strong> Mo≈æn√°. Pokud nezblbne≈°.</p>
            <div class="hero-cta">
                <a href="https://github.com/zaoo-star/PosledniPrezivsiWEB/releases/download/1.0/app-release.apk" class="btn btn-primary">üì• St√°hnout pro Android</a>
                <a href="#" class="btn btn-secondary" id="playBtn" onclick="handlePlayClick(); return false;">üéÆ Hr√°t v prohl√≠≈æeƒçi</a>
            </div>
            <p style="font-size: 0.85rem; color: var(--text); opacity: 0.6; margin-top: -2rem; margin-bottom: 3rem;">üì± iOS verze se p≈ôipravuje</p>
            <div class="hero-stats">
                <div class="stat-item"><span class="stat-value" id="totalPlayers">...</span><span class="stat-label">P≈ôe≈æiv≈°√≠ch</span></div>
                <div class="stat-item"><span class="stat-value" id="onlinePlayers">...</span><span class="stat-label">Online</span></div>
                <div class="stat-item"><span class="stat-value" id="visitCount">...</span><span class="stat-label">N√°v≈°tƒõv webu</span></div>
                <div class="stat-item"><span class="stat-value">100+</span><span class="stat-label">Lokac√≠</span></div>
            </div>
        </div>
    </section>

    <section class="guide-section" id="guide">
        <div class="section-header">
            <span class="section-tag">// P≈ô√≠snƒõ tajn√©</span>
            <h2 class="section-title">Pr≈Øvodce p≈ôe≈æit√≠m</h2>
            <p class="section-subtitle">V≈°echno co pot≈ôebuje≈° vƒõdƒõt, abys neskonƒçil jako radioaktivn√≠ hn≈Øj</p>
        </div>
        <div class="guide-intro">
            <div class="guide-intro-text">"V√≠tej ve svƒõtƒõ, kde je ƒçist√° voda vz√°cnƒõj≈°√≠ ne≈æ zlato, kde ti tv≈Øj nejlep≈°√≠ kamar√°d m≈Ø≈æe pod≈ô√≠znout krk kv≈Øli konzervƒõ fazol√≠, a kde je nejbezpeƒçnƒõj≈°√≠ m√≠sto... no, vlastnƒõ ≈æ√°dn√© nen√≠. Ale neboj, po p≈ôeƒçten√≠ tohoto pr≈Øvodce bude≈° m√≠t alespo≈à 23% ≈°anci, ≈æe p≈ôe≈æije≈° prvn√≠ t√Ωden. To je lep≈°√≠ ne≈æ vƒõt≈°ina!"<span class="signature">- Nezn√°m√Ω p≈ôe≈æiv≈°√≠, nalezen mrtv√Ω o 3 dny pozdƒõji</span></div>
        </div>
        
        <div class="guide-categories">
            <button class="guide-cat-btn active" onclick="showGuide('survival')"><span class="icon">üèïÔ∏è</span> P≈ôe≈æit√≠</button>
            <button class="guide-cat-btn" onclick="showGuide('combat')"><span class="icon">‚öîÔ∏è</span> Boj</button>
            <button class="guide-cat-btn" onclick="showGuide('base')"><span class="icon">üèöÔ∏è</span> Z√°kladna</button>
            <button class="guide-cat-btn" onclick="showGuide('world')"><span class="icon">üó∫Ô∏è</span> Svƒõt</button>
            <button class="guide-cat-btn" onclick="showGuide('multiplayer')"><span class="icon">üë•</span> Multiplayer</button>
            <button class="guide-cat-btn" onclick="showGuide('factions')"><span class="icon">üè¥</span> Frakce</button>
        </div>
        
        <div class="guide-content">
            <div class="guide-panel active" id="guide-survival">
                <div class="guide-card open">
                    <div class="guide-card-header" onclick="toggleCard(this)">
                        <span class="guide-card-icon">‚ù§Ô∏è</span>
                        <h3 class="guide-card-title">Zdrav√≠, Hlad & ≈Ω√≠ze≈à</h3>
                        <span class="guide-card-toggle">+</span>
                    </div>
                    <div class="guide-card-body"><div class="guide-card-content">
                        <p>Tvoje tƒõlo je jako star√Ω auto z vrakovi≈°tƒõ - pot≈ôebuje neust√°lou √∫dr≈æbu, jinak se rozpadne. A vƒõ≈ô mi, rozpadnout se uprost≈ôed mutant√≠ z√°kladny nen√≠ ide√°ln√≠.</p>
                        <ul>
                            <li><span class="highlight">HP (Zdrav√≠)</span> - Kdy≈æ dojde na nulu, gratuluji, jsi mrtv√Ω. Regeneruje se sp√°nkem a l√©ƒçivy.</li>
                            <li><span class="highlight">Hlad</span> - Pr√°zdn√Ω ≈æaludek = m√©nƒõ energie = jsi pomalej≈°√≠ = jsi mrtv√Ω.</li>
                            <li><span class="highlight">≈Ω√≠ze≈à</span> - Dehydratace zab√≠j√≠ rychleji ne≈æ vƒõt≈°ina mutant≈Ø.</li>
                            <li><span class="highlight">Energie</span> - Bƒõh√°n√≠, boj, v≈°echno stoj√≠ energii. Bez n√≠ se ani nepohne≈°.</li>
                        </ul>
                        <div class="guide-tip">Spal v √∫krytu! Regeneruje≈° HP, obnov√≠≈° energii a nespot≈ôebuje≈° j√≠dlo ani vodu.</div>
                    </div></div>
                </div>
                <div class="guide-card">
                    <div class="guide-card-header" onclick="toggleCard(this)">
                        <span class="guide-card-icon">üéí</span>
                        <h3 class="guide-card-title">Invent√°≈ô & Vybaven√≠</h3>
                        <span class="guide-card-toggle">+</span>
                    </div>
                    <div class="guide-card-body"><div class="guide-card-content">
                        <p>Tv≈Øj invent√°≈ô je jako batoh - omezen√Ω. Nem≈Ø≈æe≈° nosit celou tov√°rnu na z√°dech.</p>
                        <ul>
                            <li><span class="highlight">Zbranƒõ</span> - Od rezav√©ho no≈æe po laserov√© pu≈°ky.</li>
                            <li><span class="highlight">Zbroj</span> - Helma, brnƒõn√≠, rukavice, boty. Ka≈æd√Ω kus sni≈æuje damage.</li>
                            <li><span class="highlight">AI ƒåipy</span> - Vylep≈°uj√≠ zbranƒõ (+10 DMG) nebo zbroje (+10 DEF).</li>
                        </ul>
                        <div class="guide-tip">Stackuj itemy ve skladu! 50 stejn√Ωch l√©k≈Ø zab√≠r√° m√≠sto jako jeden.</div>
                    </div></div>
                </div>
            </div>
            
            <div class="guide-panel" id="guide-combat">
                <div class="guide-card open">
                    <div class="guide-card-header" onclick="toggleCard(this)">
                        <span class="guide-card-icon">‚öîÔ∏è</span>
                        <h3 class="guide-card-title">Tahov√Ω bojov√Ω syst√©m</h3>
                        <span class="guide-card-toggle">+</span>
                    </div>
                    <div class="guide-card-body"><div class="guide-card-content">
                        <p>Boj nen√≠ o tom kdo rychleji maƒçk√° tlaƒç√≠tka. Je o strategii, pl√°nov√°n√≠ a obƒçasn√©m zoufal√©m √∫tƒõku.</p>
                        <ul>
                            <li><span class="highlight">√ötok</span> - Klasick√Ω √∫tok zbran√≠. Damage = tv≈Øj DMG minus nep≈ô√≠telova DEF.</li>
                            <li><span class="highlight">Schopnosti</span> - Speci√°ln√≠ √∫toky co stoj√≠ energii ale d√°vaj√≠ extra damage.</li>
                            <li><span class="highlight">P≈ôedmƒõty</span> - Pou≈æij stimpack, hoƒè gran√°t, aplikuj jed.</li>
                            <li><span class="highlight">√ötƒõk</span> - Nƒõkdy je nejlep≈°√≠ strategie prostƒõ zmizet.</li>
                        </ul>
                        <div class="guide-warning">Kritick√© z√°sahy d√°vaj√≠ 2x damage. Nƒõkter√© perky zvy≈°uj√≠ ≈°anci na krit!</div>
                    </div></div>
                </div>
                <div class="guide-card">
                    <div class="guide-card-header" onclick="toggleCard(this)">
                        <span class="guide-card-icon">üëπ</span>
                        <h3 class="guide-card-title">Nep≈ô√°tel√© & Bossov√©</h3>
                        <span class="guide-card-toggle">+</span>
                    </div>
                    <div class="guide-card-body"><div class="guide-card-content">
                        <p>Pustina je pln√° kreatury co tƒõ chtƒõj√≠ se≈ærat, okr√°st nebo oboj√≠.</p>
                        <ul>
                            <li><span class="warning">Mutanti</span> - B√Ωval√≠ lidi, teƒè o≈°kliv√Ω a na≈°tvan√Ω.</li>
                            <li><span class="warning">Banditi</span> - Lidi co se rozhodli ≈æe pracovat je pro hlup√°ky.</li>
                            <li><span class="warning">Roboti</span> - P≈ôedv√°leƒçn√° technologie. Vƒõt≈°ina nen√≠ p≈ô√°telsk√°.</li>
                            <li><span class="gold">Bossov√©</span> - Velc√≠, zl√≠ a s epick√Ωm lootem.</li>
                        </ul>
                    </div></div>
                </div>
            </div>
            
            <div class="guide-panel" id="guide-base">
                <div class="guide-card open">
                    <div class="guide-card-header" onclick="toggleCard(this)">
                        <span class="guide-card-icon">üè†</span>
                        <h3 class="guide-card-title">Tv≈Øj √∫kryt</h3>
                        <span class="guide-card-toggle">+</span>
                    </div>
                    <div class="guide-card-body"><div class="guide-card-content">
                        <p>Domov sladk√Ω domov. Nebo sp√≠≈° "D√≠ra v zemi kde mƒõ snad nezabij√≠".</p>
                        <ul>
                            <li><span class="highlight">Sp√°t</span> - Regenerace HP a energie bez ztr√°ty j√≠dla/vody</li>
                            <li><span class="highlight">Skladovat</span> - Bezpeƒçnƒõ ukl√°dat vƒõci</li>
                            <li><span class="highlight">Craftit</span> - Vyr√°bƒõt p≈ôedmƒõty, zbranƒõ, l√©ky</li>
                            <li><span class="highlight">Stavƒõt</span> - Roz≈°i≈ôovat a vylep≈°ovat z√°kladnu</li>
                        </ul>
                    </div></div>
                </div>
                <div class="guide-card">
                    <div class="guide-card-header" onclick="toggleCard(this)">
                        <span class="guide-card-icon">üî®</span>
                        <h3 class="guide-card-title">Budovy</h3>
                        <span class="guide-card-toggle">+</span>
                    </div>
                    <div class="guide-card-body"><div class="guide-card-content">
                        <ul>
                            <li><span class="toxic">üîß D√≠lna</span> - Crafting zbran√≠ a n√°stroj≈Ø</li>
                            <li><span class="toxic">üåæ Farma</span> - Pasivn√≠ produkce j√≠dla</li>
                            <li><span class="toxic">üíß Studna</span> - Pasivn√≠ produkce vody</li>
                            <li><span class="toxic">üè• O≈°et≈ôovna</span> - Crafting l√©k≈Ø</li>
                            <li><span class="toxic">üóº Obrann√° vƒõ≈æ</span> - Chr√°n√≠ p≈ôed n√°jezdy</li>
                            <li><span class="toxic">‚öóÔ∏è Laborato≈ô</span> - Alchymie a mutace</li>
                        </ul>
                        <div class="guide-tip">Priorita #1: D√≠lna a Sklad. V≈°echno ostatn√≠ m≈Ø≈æe poƒçkat.</div>
                    </div></div>
                </div>
            </div>
            
            <div class="guide-panel" id="guide-world">
                <div class="guide-card open">
                    <div class="guide-card-header" onclick="toggleCard(this)">
                        <span class="guide-card-icon">üó∫Ô∏è</span>
                        <h3 class="guide-card-title">Mapa & Lokace</h3>
                        <span class="guide-card-toggle">+</span>
                    </div>
                    <div class="guide-card-body"><div class="guide-card-content">
                        <p>50+ lokac√≠ ƒçek√° na prozkoum√°n√≠. Ka≈æd√° m√° sv≈Øj p≈ô√≠bƒõh, nep≈ô√°tele a loot.</p>
                        <ul>
                            <li><span class="highlight">üèöÔ∏è Opu≈°tƒõn√° mƒõsta</span> - Ruiny civilizace. Pln√© lootu a bandit≈Ø.</li>
                            <li><span class="highlight">üè≠ Tov√°rny</span> - Materi√°ly, roboti, nebezpeƒç√≠.</li>
                            <li><span class="highlight">üî¨ Laborato≈ôe</span> - Tajn√© v√Ωzkumy, mutanti, rare loot.</li>
                            <li><span class="highlight">‚öîÔ∏è Vojensk√© z√°kladny</span> - Zbranƒõ, zbroje, tƒõ≈æce ozbrojen√≠ nep≈ô√°tel√©.</li>
                            <li><span class="highlight">‚ò¢Ô∏è Kontaminovan√© z√≥ny</span> - Vysok√° radiace, ale nejlep≈°√≠ loot.</li>
                        </ul>
                    </div></div>
                </div>
                <div class="guide-card">
                    <div class="guide-card-header" onclick="toggleCard(this)">
                        <span class="guide-card-icon">üìú</span>
                        <h3 class="guide-card-title">Questy & P≈ô√≠bƒõh</h3>
                        <span class="guide-card-toggle">+</span>
                    </div>
                    <div class="guide-card-body"><div class="guide-card-content">
                        <p>Svƒõt je pln√Ω tajemstv√≠ ƒçekaj√≠c√≠ch na odhalen√≠. Hlavn√≠ p≈ô√≠bƒõh tƒõ zavede do hlubin post-apokalyptick√©ho svƒõta.</p>
                        <ul>
                            <li><span class="highlight">Hlavn√≠ questy</span> - P≈ô√≠bƒõhov√° linie s d≈Øle≈æit√Ωmi rozhodnut√≠mi.</li>
                            <li><span class="highlight">Vedlej≈°√≠ questy</span> - Pom√°hej p≈ôe≈æiv≈°√≠m, z√≠skej odmƒõny.</li>
                            <li><span class="highlight">Denn√≠ √∫koly</span> - Ka≈ædodenn√≠ v√Ωzvy pro extra XP a loot.</li>
                            <li><span class="highlight">Companion questy</span> - P≈ô√≠bƒõhy tv√Ωch spoleƒçn√≠k≈Ø.</li>
                        </ul>
                    </div></div>
                </div>
            </div>
            
            <div class="guide-panel" id="guide-multiplayer">
                <div class="guide-card open">
                    <div class="guide-card-header" onclick="toggleCard(this)">
                        <span class="guide-card-icon">üí¨</span>
                        <h3 class="guide-card-title">Chat & Obchod</h3>
                        <span class="guide-card-toggle">+</span>
                    </div>
                    <div class="guide-card-body"><div class="guide-card-content">
                        <p>Nejsi s√°m! Jsou tu stovky dal≈°√≠ch p≈ôe≈æiv≈°√≠ch.</p>
                        <ul>
                            <li><span class="highlight">Glob√°ln√≠ chat</span> - K≈ôiƒç do pr√°zdna, nƒõkdo ti mo≈æn√° odpov√≠.</li>
                            <li><span class="highlight">Soukrom√© zpr√°vy</span> - Pro tajn√© dohody.</li>
                            <li><span class="highlight">Tr≈æi≈°tƒõ</span> - Kupuj a prod√°vej s ostatn√≠mi hr√°ƒçi.</li>
                            <li><span class="highlight">PvP Ar√©na</span> - Zab√≠jej ostatn√≠ hr√°ƒçe. Leg√°lnƒõ.</li>
                        </ul>
                        <div class="guide-tip">@ + jm√©no = mention. Kdy≈æ chce≈° nƒõkoho konkr√©tn√≠ho otravovat.</div>
                    </div></div>
                </div>
            </div>
            
            <div class="guide-panel" id="guide-factions">
                <div class="guide-card open">
                    <div class="guide-card-header" onclick="toggleCard(this)">
                        <span class="guide-card-icon">üè¥</span>
                        <h3 class="guide-card-title">V√°lka frakc√≠</h3>
                        <span class="guide-card-toggle">+</span>
                    </div>
                    <div class="guide-card-body"><div class="guide-card-content">
                        <p>T≈ôi frakce bojuj√≠ o nadvl√°du nad pustinou. Vyber si stranu!</p>
                        <ul>
                            <li><span style="color: #e74c3c;">üî¥ Koryho n√°sledovn√≠ci</span> - Vƒõ≈ô√≠ v s√≠lu a ≈ô√°d.</li>
                            <li><span style="color: #3498db;">üîµ Koudyho nadƒõje</span> - Vƒõ≈ô√≠ v technologii a pokrok.</li>
                            <li><span style="color: #9b59b6;">üü£ Nez√°visl√≠</span> - Nikomu ned≈Øvƒõ≈ôuj√≠, spol√©haj√≠ sami na sebe.</li>
                        </ul>
                        <p><span class="highlight">Dob√Ωv√°n√≠ √∫zem√≠:</span> Z≈Østa≈à na lokaci 30 minut a dobij ji pro svou frakci. Najmi str√°≈æce. Z√≠skej body!</p>
                        <div class="guide-warning">Spolupr√°ce je kl√≠ƒç. S√°m nic nedobyje≈°!</div>
                    </div></div>
                </div>
            </div>
        </div>
    </section>

    <section id="features" style="background: var(--darker);">
        <div class="section-header">
            <h2 class="section-title">Hlavn√≠ funkce</h2>
        </div>
        <div class="features-quick">
            <div class="feature-quick-card"><div class="feature-quick-icon">üó∫Ô∏è</div><h3 class="feature-quick-title">50+ lokac√≠</h3><p class="feature-quick-desc">Mƒõsta, laborato≈ôe, bunkry, kontaminovan√© z√≥ny.</p></div>
            <div class="feature-quick-card"><div class="feature-quick-icon">‚öîÔ∏è</div><h3 class="feature-quick-title">Tahov√© souboje</h3><p class="feature-quick-desc">Strategick√Ω boj proti mutant≈Øm a boss≈Øm.</p></div>
            <div class="feature-quick-card"><div class="feature-quick-icon">üèöÔ∏è</div><h3 class="feature-quick-title">Budov√°n√≠ z√°kladny</h3><p class="feature-quick-desc">D√≠lna, farma, obrann√© vƒõ≈æe.</p></div>
            <div class="feature-quick-card"><div class="feature-quick-icon">üë•</div><h3 class="feature-quick-title">Multiplayer</h3><p class="feature-quick-desc">Chat, obchod, PvP ar√©na.</p></div>
            <div class="feature-quick-card"><div class="feature-quick-icon">üêï</div><h3 class="feature-quick-title">Spoleƒçn√≠ci</h3><p class="feature-quick-desc">Pomocn√≠ci s vlastn√≠mi p≈ô√≠bƒõhy.</p></div>
            <div class="feature-quick-card"><div class="feature-quick-icon">üè¥</div><h3 class="feature-quick-title">V√°lka frakc√≠</h3><p class="feature-quick-desc">3 frakce, boj o √∫zem√≠ v re√°ln√©m ƒçase.</p></div>
        </div>
    </section>

    <footer>
        <div class="footer-brand">
            <div class="nav-logo">‚ò¢Ô∏è</div>
            <span class="nav-title">Posledn√≠ P≈ôe≈æiv≈°√≠</span>
        </div>
        <p class="footer-copyright">¬© 2026 Posledn√≠ P≈ôe≈æiv≈°√≠. War never changes. Ale verze hry ano! ‚ò¢Ô∏è</p>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script>
        // Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyAnqRlz8iSsMTKa0PePTIvbPwncG1yj9RM",
            authDomain: "posledni-prezivsi.firebaseapp.com",
            databaseURL: "https://posledni-prezivsi-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "posledni-prezivsi",
            storageBucket: "posledni-prezivsi.firebasestorage.app",
            messagingSenderId: "593304244516",
            appId: "1:593304244516:web:dd99f403be270dc89a63b1"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        
        // Naƒçti statistiky z leaderboard
        db.ref('leaderboard').on('value', (snapshot) => {
            const data = snapshot.val();
            if (data) {
                const players = Object.values(data);
                const totalPlayers = players.length;
                
                document.getElementById('totalPlayers').textContent = totalPlayers;
            }
        });
        
        // Naƒçti online hr√°ƒçe ze samostatn√© tabulky
        db.ref('online').on('value', (snapshot) => {
            const data = snapshot.val();
            const onlinePlayers = data ? Object.keys(data).length : 0;
            document.getElementById('onlinePlayers').textContent = onlinePlayers;
        });
        
        // Poƒç√≠tadlo n√°v≈°tƒõv
        (function() {
            const visitKey = 'pp_visited_' + new Date().toDateString();
            if (!localStorage.getItem(visitKey)) {
                // Nov√° n√°v≈°tƒõva dnes - inkrementuj poƒç√≠tadlo
                db.ref('stats/visits').transaction(current => (current || 0) + 1);
                localStorage.setItem(visitKey, 'true');
            }
            
            // Zobraz poƒçet n√°v≈°tƒõv
            db.ref('stats/visits').on('value', (snapshot) => {
                const visits = snapshot.val() || 0;
                document.getElementById('visitCount').textContent = visits.toLocaleString();
            });
        })();
        
        // Particles
        const container = document.getElementById('particles');
        for (let i = 0; i < 30; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.style.left = Math.random() * 100 + '%';
            p.style.top = Math.random() * 100 + '%';
            p.style.animationDelay = Math.random() * 6 + 's';
            container.appendChild(p);
        }
        
        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(a => {
            a.addEventListener('click', e => {
                const href = a.getAttribute('href');
                if (href && href !== '#' && href.length > 1) {
                    e.preventDefault();
                    document.querySelector(href)?.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
        
        // Guide tabs
        function showGuide(cat) {
            document.querySelectorAll('.guide-panel').forEach(p => p.classList.remove('active'));
            document.getElementById('guide-' + cat)?.classList.add('active');
            document.querySelectorAll('.guide-cat-btn').forEach(b => b.classList.remove('active'));
            event.target.closest('.guide-cat-btn')?.classList.add('active');
        }
        
        /* Card toggle */
        function toggleCard(header) {
            header.closest('.guide-card').classList.toggle('open');
        }
        
        /* Mobile menu toggle */
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            const menuBtn = document.getElementById('mobileMenuBtn');
            navLinks.classList.toggle('active');
            menuBtn.textContent = navLinks.classList.contains('active') ? '‚úï' : '‚ò∞';
        }
        
        // Zav≈ôi menu po kliknut√≠ na odkaz
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                const navLinks = document.getElementById('navLinks');
                const menuBtn = document.getElementById('mobileMenuBtn');
                if (navLinks.classList.contains('active')) {
                    navLinks.classList.remove('active');
                    menuBtn.textContent = '‚ò∞';
                }
            });
        });
        
        /* ========== AUTH SYST√âM ========== */
        let currentUser = null;
        const auth = firebase.auth();
        
        // Sleduj stav p≈ôihl√°≈°en√≠
        auth.onAuthStateChanged((user) => {
            currentUser = user;
            updateAuthUI();
        });
        
        function updateAuthUI() {
            const authBtn = document.getElementById('authNavBtn');
            const playBtn = document.getElementById('playBtn');
            const forumBtn = document.getElementById('forumNavBtn');
            
            if (currentUser && !currentUser.isAnonymous) {
                const displayName = currentUser.displayName || currentUser.email.split('@')[0];
                authBtn.innerHTML = '‚úÖ ' + displayName;
                authBtn.onclick = () => { showAccountModal(); return false; };
                playBtn.innerHTML = 'üéÆ Hr√°t jako ' + displayName;
                forumBtn.style.display = 'block';
            } else {
                authBtn.innerHTML = 'üë§ P≈ôihl√°sit';
                authBtn.onclick = () => { showAuthModal(); return false; };
                playBtn.innerHTML = 'üéÆ Hr√°t v prohl√≠≈æeƒçi';
                forumBtn.style.display = 'none';
            }
        }
        
        function handleForumClick() {
            if (currentUser && !currentUser.isAnonymous) {
                window.location.href = '/forum/';
            } else {
                showAuthModal('Pro p≈ô√≠stup na f√≥rum se mus√≠≈° p≈ôihl√°sit');
            }
        }
        
        function handlePlayClick() {
            if (currentUser && !currentUser.isAnonymous) {
                // P≈ôihl√°≈°en√Ω - p≈ôejdi do hry
                window.location.href = '/hra/';
            } else {
                // Nep≈ôihl√°≈°en√Ω - zobraz modal
                showAuthModal('Pro hran√≠ se mus√≠≈° p≈ôihl√°sit nebo registrovat');
            }
        }
        
        function showAuthModal(message = '') {
            const modal = document.createElement('div');
            modal.id = 'authModal';
            modal.innerHTML = `
                <div class="auth-overlay" onclick="closeAuthModal()"></div>
                <div class="auth-box">
                    <button class="auth-close" onclick="closeAuthModal()">‚úï</button>
                    <div class="auth-header">
                        <div class="auth-icon">‚ò¢Ô∏è</div>
                        <h2>P≈ôihl√°≈°en√≠</h2>
                        ${message ? '<p class="auth-message">' + message + '</p>' : ''}
                    </div>
                    
                    <div class="auth-tabs">
                        <button class="auth-tab active" onclick="switchAuthTab('login')">P≈ôihl√°sit</button>
                        <button class="auth-tab" onclick="switchAuthTab('register')">Registrovat</button>
                    </div>
                    
                    <div id="loginForm" class="auth-form">
                        <input type="email" id="loginEmail" placeholder="üìß E-mail" autocomplete="email">
                        <input type="password" id="loginPassword" placeholder="üîë Heslo" autocomplete="current-password">
                        <div id="loginError" class="auth-error"></div>
                        <button class="auth-btn" onclick="doLogin()">üöÄ P≈ôihl√°sit se</button>
                        <p class="auth-forgot" onclick="showResetPassword()">Zapomnƒõl/a jsi heslo?</p>
                    </div>
                    
                    <div id="resetForm" class="auth-form" style="display: none;">
                        <p style="color: #888; font-size: 0.9rem; margin-bottom: 1rem;">Zadej sv≈Øj e-mail a po≈°leme ti odkaz pro reset hesla.</p>
                        <input type="email" id="resetEmail" placeholder="üìß E-mail" autocomplete="email">
                        <div id="resetError" class="auth-error"></div>
                        <button class="auth-btn" onclick="doResetPassword()">üìß Odeslat reset hesla</button>
                        <p class="auth-forgot" onclick="switchAuthTab('login')">‚Üê Zpƒõt na p≈ôihl√°≈°en√≠</p>
                    </div>
                    
                    <div id="registerForm" class="auth-form" style="display: none;">
                        <input type="text" id="regNick" placeholder="üë§ P≈ôezd√≠vka (jm√©no postavy)" maxlength="20">
                        <input type="email" id="regEmail" placeholder="üìß E-mail" autocomplete="email">
                        <input type="password" id="regPassword" placeholder="üîë Heslo (min. 6 znak≈Ø)" autocomplete="new-password">
                        <div id="regError" class="auth-error"></div>
                        <button class="auth-btn" onclick="doRegister()">üìù Registrovat</button>
                    </div>
                    
                    <div class="auth-divider"><span>nebo</span></div>
                    
                    <button class="auth-btn auth-guest" onclick="playAsGuest()">üëª Hr√°t jako host</button>
                    <p class="auth-guest-note">Host nem√° cloud save ani ochranu nicku</p>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Focus na prvn√≠ input
            setTimeout(() => document.getElementById('loginEmail')?.focus(), 100);
        }
        
        function closeAuthModal() {
            document.getElementById('authModal')?.remove();
        }
        
        function switchAuthTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            if (event && event.target) event.target.classList.add('active');
            
            document.getElementById('loginForm').style.display = tab === 'login' ? 'flex' : 'none';
            document.getElementById('registerForm').style.display = tab === 'register' ? 'flex' : 'none';
            document.getElementById('resetForm').style.display = 'none';
            
            // Aktivuj spr√°vnou z√°lo≈æku
            if (tab === 'login' || tab === 'register') {
                const tabs = document.querySelectorAll('.auth-tab');
                tabs.forEach(t => t.classList.remove('active'));
                tabs[tab === 'login' ? 0 : 1].classList.add('active');
            }
        }
        
        function showResetPassword() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('resetForm').style.display = 'flex';
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            
            // P≈ôedvypl≈à email pokud u≈æ byl zad√°n
            const loginEmail = document.getElementById('loginEmail').value;
            if (loginEmail) {
                document.getElementById('resetEmail').value = loginEmail;
            }
        }
        
        async function doResetPassword() {
            const email = document.getElementById('resetEmail').value.trim();
            const errorDiv = document.getElementById('resetError');
            
            if (!email) {
                errorDiv.textContent = '‚ùå Zadej e-mail';
                errorDiv.style.color = '#ff4444';
                return;
            }
            
            errorDiv.textContent = '‚è≥ Odes√≠l√°m...';
            errorDiv.style.color = '#888';
            
            try {
                await auth.sendPasswordResetEmail(email);
                errorDiv.textContent = '‚úÖ E-mail odesl√°n! Zkontroluj svou schr√°nku (i spam).';
                errorDiv.style.color = '#7cfc00';
            } catch (error) {
                console.error('Reset error:', error);
                if (error.code === 'auth/user-not-found') {
                    errorDiv.textContent = '‚ùå √öƒçet s t√≠mto e-mailem neexistuje';
                } else if (error.code === 'auth/invalid-email') {
                    errorDiv.textContent = '‚ùå Neplatn√Ω e-mail';
                } else {
                    errorDiv.textContent = '‚ùå Chyba: ' + error.message;
                }
                errorDiv.style.color = '#ff4444';
            }
        }
        
        async function doLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');
            
            if (!email || !password) {
                errorDiv.textContent = 'Vypl≈à e-mail a heslo';
                return;
            }
            
            errorDiv.textContent = '‚è≥ P≈ôihla≈°uji...';
            
            try {
                await auth.signInWithEmailAndPassword(email, password);
                closeAuthModal();
                // P≈ôesmƒõruj do hry
                window.location.href = '/hra/';
            } catch (error) {
                console.error('Login error:', error);
                if (error.code === 'auth/user-not-found') {
                    errorDiv.textContent = '‚ùå √öƒçet neexistuje';
                } else if (error.code === 'auth/wrong-password') {
                    errorDiv.textContent = '‚ùå ≈†patn√© heslo';
                } else if (error.code === 'auth/invalid-email') {
                    errorDiv.textContent = '‚ùå Neplatn√Ω e-mail';
                } else {
                    errorDiv.textContent = '‚ùå Chyba: ' + error.message;
                }
            }
        }
        
        async function doRegister() {
            const nick = document.getElementById('regNick').value.trim();
            const email = document.getElementById('regEmail').value.trim();
            const password = document.getElementById('regPassword').value;
            const errorDiv = document.getElementById('regError');
            
            if (!nick || !email || !password) {
                errorDiv.textContent = 'Vypl≈à v≈°echna pole';
                return;
            }
            
            if (nick.length < 3) {
                errorDiv.textContent = 'P≈ôezd√≠vka mus√≠ m√≠t alespo≈à 3 znaky';
                return;
            }
            
            if (password.length < 6) {
                errorDiv.textContent = 'Heslo mus√≠ m√≠t alespo≈à 6 znak≈Ø';
                return;
            }
            
            // Kontrola chr√°nƒõn√Ωch jmen
            const protectedNames = ['zaoo', 'admin', 'administrator', 'moderator', 'mod', 'gm', 'gamemaster', 'developer', 'dev', 'system'];
            const nickLower = nick.toLowerCase();
            if (protectedNames.some(n => nickLower.includes(n))) {
                errorDiv.textContent = '‚ùå Toto jm√©no je chr√°nƒõn√©';
                return;
            }
            
            errorDiv.textContent = '‚è≥ Vytv√°≈ô√≠m √∫ƒçet...';
            
            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                await userCredential.user.updateProfile({ displayName: nick });
                
                // Ulo≈æ do datab√°ze
                await db.ref('users/' + userCredential.user.uid).set({
                    nick: nick,
                    email: email,
                    createdAt: firebase.database.ServerValue.TIMESTAMP
                });
                
                closeAuthModal();
                window.location.href = '/hra/';
            } catch (error) {
                console.error('Register error:', error);
                if (error.code === 'auth/email-already-in-use') {
                    errorDiv.textContent = '‚ùå E-mail je ji≈æ registrov√°n';
                } else if (error.code === 'auth/weak-password') {
                    errorDiv.textContent = '‚ùå Slab√© heslo';
                } else {
                    errorDiv.textContent = '‚ùå Chyba: ' + error.message;
                }
            }
        }
        
        function playAsGuest() {
            closeAuthModal();
            window.location.href = '/hra/';
        }
        
        function showAccountModal() {
            if (!currentUser) return;
            
            const displayName = currentUser.displayName || currentUser.email.split('@')[0];
            
            const modal = document.createElement('div');
            modal.id = 'authModal';
            modal.innerHTML = `
                <div class="auth-overlay" onclick="closeAuthModal()"></div>
                <div class="auth-box">
                    <button class="auth-close" onclick="closeAuthModal()">‚úï</button>
                    <div class="auth-header">
                        <div class="auth-icon">‚úÖ</div>
                        <h2>${displayName}</h2>
                        <p class="auth-email">${currentUser.email}</p>
                    </div>
                    
                    <button class="auth-btn" onclick="window.location.href='/hra/'">üéÆ Pokraƒçovat do hry</button>
                    
                    <button class="auth-btn auth-logout" onclick="doLogout()">üö™ Odhl√°sit se</button>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        async function doLogout() {
            await auth.signOut();
            closeAuthModal();
        }
    </script>
    
    <style>
        /* Auth Modal Styly */
        #authModal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 10000; display: flex; align-items: center; justify-content: center; }
        .auth-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); backdrop-filter: blur(5px); }
        .auth-box { position: relative; background: linear-gradient(180deg, #1a1510 0%, #0d0a08 100%); border: 2px solid var(--rust); border-radius: 12px; padding: 2rem; width: 90%; max-width: 400px; animation: fadeIn 0.3s ease; }
        .auth-close { position: absolute; top: 1rem; right: 1rem; background: none; border: none; color: #888; font-size: 1.5rem; cursor: crosshair; transition: color 0.3s; }
        .auth-close:hover { color: var(--rust); }
        .auth-header { text-align: center; margin-bottom: 1.5rem; }
        .auth-icon { font-size: 3rem; margin-bottom: 0.5rem; }
        .auth-header h2 { font-family: 'Russo One', sans-serif; color: var(--rust); margin: 0; }
        .auth-message { color: #ff9800; font-size: 0.9rem; margin-top: 0.5rem; }
        .auth-email { color: #888; font-size: 0.85rem; margin-top: 0.3rem; }
        .auth-tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; }
        .auth-tab { flex: 1; background: rgba(255,255,255,0.05); border: 1px solid #333; color: #888; padding: 0.8rem; font-family: 'Oxanium', sans-serif; font-size: 0.9rem; cursor: crosshair; transition: all 0.3s; }
        .auth-tab:hover, .auth-tab.active { background: rgba(212, 114, 46, 0.2); border-color: var(--rust); color: var(--rust); }
        .auth-form { display: flex; flex-direction: column; gap: 0.8rem; }
        .auth-form input { background: rgba(0,0,0,0.5); border: 1px solid #333; color: #fff; padding: 0.9rem 1rem; font-family: 'Share Tech Mono', monospace; font-size: 1rem; border-radius: 4px; transition: border-color 0.3s; }
        .auth-form input:focus { outline: none; border-color: var(--rust); }
        .auth-form input::placeholder { color: #666; }
        .auth-error { color: #ff4444; font-size: 0.85rem; min-height: 1.2rem; }
        .auth-btn { background: linear-gradient(135deg, var(--rust) 0%, #8b4513 100%); border: none; color: #fff; padding: 1rem; font-family: 'Oxanium', sans-serif; font-size: 1rem; font-weight: 600; cursor: crosshair; transition: all 0.3s; border-radius: 4px; margin-top: 0.5rem; }
        .auth-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 20px var(--rust-glow); }
        .auth-guest { background: #333; }
        .auth-guest:hover { background: #444; box-shadow: none; }
        .auth-logout { background: #8b0000; }
        .auth-logout:hover { background: #a00; }
        .auth-divider { display: flex; align-items: center; margin: 1.5rem 0; color: #555; font-size: 0.85rem; }
        .auth-divider::before, .auth-divider::after { content: ''; flex: 1; height: 1px; background: #333; }
        .auth-divider span { padding: 0 1rem; }
        .auth-guest-note { text-align: center; color: #666; font-size: 0.75rem; margin-top: 0.5rem; }
        .auth-forgot { text-align: center; color: var(--rust); font-size: 0.85rem; margin-top: 0.8rem; cursor: pointer; transition: color 0.3s; }
        .auth-forgot:hover { color: var(--text-light); text-decoration: underline; }
    </style>
</body>
</html>
